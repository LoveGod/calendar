Views Calendar 5.x
==================

Version 2.0 dev
===============

Version 2.0-rc5
===============

- Make sure Devel module doesn't add queries to Calendar Popups.
- #292306 Make sure no error is thrown if $GLOBALS['calendar_stripes'] is empty.
- Make sure database values with empty timezone names get defaulted to use site timezone in calendar handling.
- #288644 Add test for $args in calendar_real_url().
- #292811 From/To arguments should be combined with AND instead of OR.
- Rework the calendar legend to incorporate imported ical node colors as well as internal colors.
- Add helper function calendar_get_node_link() to construct a node link for either an internal or external node.
- #272330 Rework css to add background colors where colors are defined and group colors together in the file.

Version 2.0-rc4
===============

- Add 'All day' themes for use in nodes and calendar psuedo nodes.
- #290826 Fix logic error that was missing date ranges that start before the current period by changing 'AND' to 'OR' in argument filter.
- #268669 Improve logic for splitting multi-day nodes across calendar dates, patch by emok.
- Add new DATE_FORMAT_DATE for date-only format that is used throughout the calendar.

Version 2.0-rc3
===============

- Make sure you can have arguments with summary views preceding the calendar.
- #258176 Make sure mini calendar links includes all other arguments.
- #239594 Make sure ical links with other arguments work correctly.
- #238287 Make sure calendars with other args (like OG) display default view.
- #269920 Fix breadcrumb on year view.
- #238369 Clean up breadcrumb when using calendar with other arguments.
- #282008 Fix back/next links on year view to omit mini links.
- Tweaked the jcalendar popup html and css a bit to keep title from popping out of the box in some themes.
- Bring the 5.2 and 6.2 calendar themes into alignment so both use the same styles and themes, including tableless back/next navigation links and themeable headers.
- #283902 Make sure date_format() isn't used on items with no calendar dates.
- #283206 Backport ability to use full name of week days in calendar view.
- #284760 Don't make weekno a link when there is no week view, eliminate some redundant date_format() calls.
- #276421 Use farbtastic color picker to set calendar stripes, and start process of making stripes more customizable.
- #282777 Try to make calendar creation in PHP4 more efficient to speed up creation of year calendar.

Version 2.0-rc2
===============

- #278391 Fix calendar popup position in Firefox.
- #278267 Add a theme for the jcalendar popup.
- #279169 Get rid of calendar_info() function in uninstall.
- #261610 Make sure delta value is available for jcalendar popup display.
- #255984 Make popup calendar date selector a configurable value.
- #251094 Make weekno a configurable value.
- #259127 Remove ajax back/next navigation on mini calendar, it's not working well enough.
- #247215 Make sure default calendar view and block are not triggered if there is no date field and add validation to the view to require a date field.
- #268668 Adjust comparison dates for timezone offsets to make sure multi-day events get split correctly.
- The cached ical feed cannot be used to store date objects, recreate them as needed.
- #234070 Fix broken ical title.
- #258501 Make sure calendar.inc is included when creating ical feed.
- #258515 Fix url in ical export.
- #266623 Protect against foreach() errors on empty ical feeds.
- PHP4 can't do comparisons of date objects, so alter calendar comparison code to compare formatted dates instead.
- #275213 Arguments were reversed in date_week_range().
- Remove as many dependencies as possible from install files and auto-enable necessary modules.
- #272263 Make sure empty ical stream doesn't get into cache.
- Cleanup calendar_info() values - we don't use granularity and only need one array for from/to.
- #261610 Prepare for a jQuery popup in the calendar by adding a unique id to the 'node' and altering the date theme to surpress all other dates if $node->date_id is set.
- #243172 Theme('calendar_empty') should be theme('calendar_empty_day'), patch by JohnAlbin.
- Clean up install file included files and include file paths, and auto-enable date_timezone and date_php4.
- Switch calendar_date_week() to date_week() and calendar_week_range() to date_week_range().
- Make sure mini calendar works correctly for non-calendar views, like lists.
- #154479 Add jQuery ajax update for navigating mini block calendar.
- #223601 Re-implement the 'mini' url for calendar block so it will work in Panels and ajax.
- #243220 Add items to the calendar date box theme.
- #243725 Add title/description/url to calendar setup form.
- #243254 Make sure args aren't overriden if already set.
- #239501 Add missing argument for teaser display.
- #210844 Make sure empty text displays.
- #234635 Add calendar_build_nodes() to calendar_ical export processing.
- #243712 make sure default views are retrieved as well as db views.
- #235434 Using timezone name instead of timezone object in several places.
- #233513 Fix missing $selected marker.
- #233975 Don't bypass theme function.
- #242686 Fix spelling errors.
- #240297 make sure id has a value.

Version 2.0-rc
==============
- Make sure new required modules get enabled during the update.
- Fix To time in calendar, was incorrectly picking up a :59 value.
- Make sure min and max dates are in localtime.
- #225459 Fix days that span multiple days.
- #220657 Revert to using the API instead of templates for drawing the calendar.
- #186875 make sure navigation is always returned as an array so it doesn't break table theme.
- Remove database timezone handling by rolling back to previous version that used offsets instead. Based on problems noted in #218479 and #220663, we cannot count on database timezone handling to be available in MYSQL or work consistently with the timezone names that PHP uses in POSTGRES, so trying to do timezone conversions in the database is not going to work.
- #219200 Make sure views is available during install.
- #218704 Fix error in setting array variable.
- Getting rid of offsets!! Alter query code to cast ISO and UNIX dates to native datetimes and do timezone conversion in the database. Much faster and more accurate.
  The offset fields can now be dropped from the Date fields since we only need the timezone name to do the conversion.
- Simplify the query a bit, but it's still very complex. We need a native datetime field so we can let the db do this the right way.
- Make sure calendar works with an argument before the calendar.
- The popup calendar datepicker needs a default value in the normal datetime format.
- Add settings option to not display year, month, day, or week view and adjust links to hide any link to hidden displays.
- Get rid of separate mini args and so mini and main calendar move together. This has been often requested and we already have too much complication in tracking various filter and non-calendar arguments in the view.
- Make sure ical dates only get shown once in views with more than one date field.
- Make sure 'today', 'future', and 'past' classes don't get applied to non-date cells.
- #216365 make sure all needed files are included in the install files.
- We can't trust the database date conversion unless we have the right offset stored in the database, so only the date-specific dates have the right values for this to work. All others must be retrieved as UTC values and converted in PHP.
- Make sure functions are available during install.
- #128602 add classes for 'past' and 'future' to date boxes, not using them by default, but available to css.
- #211568 Add setup option to show first 1, 2, or 3 letters of day names in mini calendar.
- Missing a closing div tag in the month view.
- Get rid of deprecated function date_time().
- Fix date format for day view.
- Wrong field name used to select date format.
- Set the 'today' class before incrementing the date.
- More clean up of themes to be sure both remote and local items have a reasonable display and to provide a theme to consistantly display dates.
- Fix title and url of mini calendar.
- Get iCal import working again in new version.
- Non-calendar views should now be working, so you can switch between calendar, table, list, teasers, and nodes for the display for each time period.
- Make sure $node->url is set so the link to the node works.
- Move more of the code to the .inc file.
- Clean up the date selector and add a new function to detect the calendar week from a date.
- Add a dependency on Date Timezone.
- Fix a critical typo that keeps more than one value from showing up for a day.
- Clean up theme code.
- Make the new date selector dependent on the Date Popup module.
- Rework the calendar to pull values from a template table so we can browse and navigate by calendar week. This simplifies the code and hopefully will speed up processing the calendar since the database is doing the work of constructing the calendar template instead of using PHP computations. This method is also a more accurate way of computing calendar weeks. Requires an update to populate a template table. This works because there are only 14 possible calendar templates no matter how many years you go back or forward.
- Add in the jQuery popup selector as a method to jump to different dates.
- Fix theme error in day view that repeated all previous items with each new item.
- Make sure blank nodes have the right values to create blank calendar pages.
- Standardize on use of date_format_date() to get translations done on the formatted values of date parts.
- Clean up css for month date boxes so display in Firefox and IE looks the same.
- Lost the node nid in some places which kept dates from showing up.
- Have to keep views handlers in calendar.module not in calendar_api.inc so they can be discovered when needed.
- Updating Calendar HEAD with new version of Calendar module that works with the new 5.2 Date API in Date HEAD. 

Version 1.x-dev
===============
- Force extra spaces into titles to keep long unbroken title text from breaking calendar layout.
- Add a min width to the calendar boxes.
- Clean HTML entities out of imported iCal titles.
- Clean up some of the logic on when to throw out events that are outside the requested calendar range.
- #189760 Don't prefix css path with slash.
- #186170 Make sure calendar doesn't overlap sidebar in IE.
- Get rid of legacy links in theme that don't work any more.

Version 1.7
===========

- Move cached calendar info to cache_views so it gets cleared when views_invalidate_cache() is called.
- 185640 fix function and table name errors in install file.
- Keep devel module from appending queries to ical export.
- Calculation of max date for a month needs adjustment.
- Fix ical export to match changes in ical parser.
- Create a separate theme for remote nodes and make sure all remote nodes get necessary cleanup.
- Adapt calendar to use fixed DURATION handling in ical parser.
- Cleanup calendar ical import.
- 183877 get rid of constant for CALENDAR_PATH and just use drupal_get_path() when needed.
- Update of calendar ical module to use the new date ical parser.

Version 1.6
===========

- 182998 Use Date API handling of timezones instead of Drupal default timezone offset when computing calendar values.
- 182155 Make sure multiple event nodes get a unique identifer when testing if they have already been processed.
- 181390 Cache_clear_all was missing wildcard in hook_cron().
- Add theme to override default Views handling of page title.
- Several fixes needed so menu tabs and arguments work on urls with $args in them, like node/$arg/calendar.
- Make sure plugin works even_empty, add install file that can clear cached calendar settings.
- Move administrative code to separate file so it isn't always parsed.
- Move plugin display themes to calendar.theme.
- Cache calendar fields() and calendar views() arrays.
- 172073 Allow for non-calendar arguments before any calendar arguments to dynamically filter calendar.
- Remove date fields from default view to force user to add the right field. Tired of handling support questions about unexpected date fields.
- 171306 keep empty nodes out of ical feed.
- 166659 and 160378 clean up handling of header and footer on empty pages.
- 155701 and 167110 ical and setup tabs sometimes didn't show up. Needed to rework the logic of calendar_is_calendar() and calendar_views() to properly identify views that have calendar types or calendar args.
- 159326 slight correction to indicating 'selected' day in mini calendar.
- 134240 fourth ical argument is optional, add '=NULL' so it will always work.
- 115144 make sure multiple day nodes don't get title and teaser created more than one time.
- 165845 make sure empty days have empty days theme.
- 167141 change array union to array merge to keep from losing first ical item.
- Stop adding label after node title in the default theme. Takes up too much space, and confuses people. Anyone that wants it there can do custom themeing.
- 171155 remove view-header from css, no longer being used.
- 176384 test for integer before checking calendar values.
- 175131 fix min height in IE6.
- 178839 get rid of use of 'Start' and 'End' in default themes. They sometimes show up when they shouldn't and take up too much room anyway. Anyone who wants them can add them back into a custom theme function.
- More cleanup of day and month themes.
- Check_markup was applied too many times to the day view, wiping out all html.
- Fixing the day view - view fields weren't getting added in correctly.
- 135296 Offset for date-specific timezone was using the offset field name instead of its value, so being ignored. This will fix problems where time was showing up in the calendar adjusted to GMT timezone.
- 160623 change event_get_offset() to date_get_offset() to match change in timezone.inc file.
- 138825 $view->all was not getting converted back to a number in the theme.
- 163552 fix inconsistancy between integer values and zero-padded values in date formatting,
- 157393 make sure ical cache table isn't dropped if it was never created.

Version 1.5
===========

- 146347 fix some more places where date_format_date() should be used instead of gm_date() so they are translated.
- make sure nav titles get run through theme properly.
- 141267 fix css attribute, should be overflow:hidden.
- 140922 fix the way the table view array is constructed.
- Found some debugging cruft in ical module when cache is cleared.
- 153580 use date_format_date instead of date_gmdate to get date parts translated.
- 149668 fix wrong permissions.
- 147386 remove redundant adjustment for user time.
- 121300 make sure stripe index gets incremented.
- 122568 for multi-day fields make sure $node->teaser doesn't keep adding the same fields.
- 141264 fix typo in style inclusion.
- 150054 also need to fix the setup forms now that they only have a view name and not the whole view object passed to them.
- 150054 rework the way the calendar_views() function works to improve performance.
- 149668 make sure default views get included as calendar views.
- Add in new hook_views_tabs() for menu tab.
- Make sure ical module gets uninstalled if calendar is uninstalled.
- Make sure calendar module loads before calendar_ical.
- Clean up css.
- Fix error in calendar_has_calendar_args() function.
- Now that all views will work with calendar arguments, add setup items to select which view you want for each time period and make sure feed items get added to all of them.
- Add some improvements to the way feed items are displayed in the day view by undoing ical escaping.
- Set up cron to expire the cache, fix mistake in function applying time format to feed items.
- Add new setup item to set display format for year, month, week, and day.
- Make sure links to 'all' days and months get reset to current value.
- 133018 initialize array.
- Since I can't get the week view working completely right, I'm just going to hide it for now.
- 132357, fix pass-by-reference typos.
- Fix default page info in default view and push handling of empty days through theme.
- Refactor arguments handling to be more consistent with normal argument handling and clean up ical argument problems.
- Fix min and max date comparison for week view
- 128517 fix error in week calculation so week doesn't always get set to 1
- 127038 fix limit_nodes function to include last day of month
- Adapt setup tabs to new Views handling of tabs
- Move check for non-calendar views to top of theme instead of node-creation function,  theme_calendar_ical_feed had inconsistency in variable name, check for ical argument to keep ical feed off views that don't have it.
- 127291 change view titles and breadcrumbs to use %1, %2, %3 dynamic titles
- Get rid of italics in css, make sure date_api is included where needed, add more date info to ical feed.
- 127818 Needed Date API functions to get timezone fixes working, so Date API handling is now fully incorporated into the calendar module, which means if you are using adodb to create historical dates, you can also create historical calendars.
- 112682 Fix handling of week views by cleaning up places where system timezone adjustment was getting included.
- Make sure webcal is replaced with http in the ical url

Version 1.4
===========

NOTE Date API has been split out into a separate module to make the API available with no dependency on CCK and the Calendar module now requires the Date API. For best update results, uninstall the Calendar module before adding the updated Calendar and Date files to the site, then immediately go to the modules page and enable both the Calendar and Date API modules.

- 125913 get calendar_views array properly initialized
- 125509 fix for postgres date ranges to use exact last day of month in SQL, more clean up of week range calculations. Requires new functions just added to Date API.
- 125483 more corrections to week calculation
- 124910 correct site timezone for dst
- Fix tab handling
- 124107 translate month names
- Keep extra ical icon from showing up in block version of the view
- 118055, make sure view works right if only block is set up to calendar type
- 123592 make sure arguments ahead of the calendar arguments are retained in the links
- 121300 clean up handling of stripes to make them consistant
- 111947, 121956, 110883, 119874, fix miscellaneous problems with week view and navigation.
- Add headers and dow calc for all possible first day of week options
- Use variable for view time format
- Fix day teaser view in theme
- Make sure legend and switch blocks aren't displayed on non-calendar pages
- 124320 fix fatal errors in identifying include paths
- 123944, 123377 add validation to make sure right arguments and field settings are used.
- Check module_exists on event module adjustments in case custom module is named 'event'.
- css cleanup
- Better theme for full day nodes, make sure webcal protocol gets switched to http
- Add ical import and export support
- Get the feed stripe to show up in the legend.
- Reconfiguring to move ical functions into separate, optional module and add hook to calendar module to insert other items into calendar.
- 119712, 121451 fix to make transition to separate Date API easier since  non-existant functions will cause fatal error that prevents ability to get back to module installation page.
- 120787 more places need the exposed filter choices appended to the url.
- Make sure not to try to do anything if there are no feeds.
- Fix a mistake in the ical file where it tries to query a non-existant table. Use the timezones.inc file instead.
- More theme cleanup.

Version 1.3
===========

- 120813 first of month dates not appearing, fixed by this patch and setting field to not use timezone conversion when there is no hours granularity.
- 98859 add filter and arg info to links and navigation so it is retained
- Move themes into separate file to make them easier to find
- Add dependency on Date API and remove duplicated code from Calendar
- Move page navigation and top links into theme and make sure exposed filters don't separate navigation and calendar.
- Clean up themeing
- 115144 make sure label only gets added once to title
- 115999 initialize value to prevent wrong tables from being inserted into view
- 99254 fix missing name in block
- 113036 add translation for default view titles

Version 1.2
===========

- 113959, 114654 empty calendar not created for non-existant days
- Fix for back/next url
- 113714 correct invalid foreach argument by altering method of calling views handler for non-date fields
- 112182, 111701, 108071 - extra fields not showing up in calendar teaser
- 99223 fix current date
- 113125 - current view needs a link in the links listed aboved the calendar
- Fix display of time in calendar, fix content type name in legend
- 109336 default to current month instead of year
- Cleanup handling of 'to' date for non-CCK date, fix links at top of calendar
- 108957 add include path, patch by retodd, incorporate from/to cck date option from latest version of date module.
- Incorporate from/to date capability added to cvs version of date module.
- 108957 add include path
- 89097 reverse sign on option delta, fix view tablename aliases
- 114265 handle empty 'to' date values by filling with 'from' date. Fix block view of date browser, use new CCK views table alias.
- 80592 alter default value handling to match changes in CCK, display blank value as default for to date if not required, make sure blank
value is stored as NULL

Version 1.1
=====================

- Force CCK multiple value fields to display as separate items on calendar.
- #107489 use drupal_substr intead of substr to handle Russian characters
- Fixing week handling requires change to week nav link
- #104458 get rid of <nobr></nobr>
- #104303 fix cell id for day value
- Fix calculation of week start/end times and timezone adjustment of calendar views
- Fix error in setting date constraints on year view
- #99820 cast array_keys calls to arrays, reverse mistaken switch of underscore and hypen in theme function names
- #100460 replace css underscores with hyphens


Version 1.1-beta
======================

Initial release.

